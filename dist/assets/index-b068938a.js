import{a as c}from"./react-31052980.js";import{e as J,C as Aa,bv as Da,a9 as Ta,D as Pa,a0 as _a,a1 as ka,bK as pa,$ as O,bL as d,a2 as La,f as sa,bH as Wa,i as Ea,aE as aa,h as Ba,a3 as Y,d as A,U as D,aU as ea,s as $a,W as ja,ba as Ma,c as la}from"./main-1d195725.js";import{P as Fa}from"./index-72f685bb.js";import{u as ia,a as o,F as H,j as l,_ as v}from"./index-a4114ef4.js";import{d as Ua,b as Ya,h as Ja}from"./chevron-left-00fe92ff.js";import{E as oa,aM as Ha,S as Ra,K as Va,aK as ta,aL as Ka,ae as qa}from"./freelancerSlice-60742dc0.js";import{d as Ga}from"./SearchTwoTone-880281d3.js";import{p as na,a as Qa,T as C}from"./TextField-d5ff1ee4.js";import{h as za}from"./moment-fbc5633a.js";import{L as W}from"./index-4db24ebd.js";import"./index-27986fb2.js";import{F as Xa}from"./FileUpload-b90f0399.js";import{M as Za}from"./MenuItem-030e42a2.js";import"./trash-6f040b71.js";import"./arrow-right-circle-12522627.js";import"./loader-2-0dcaac2c.js";oa(J)(({theme:n})=>({"& .MuiDialogContent-root":{padding:n.spacing(2)},"& .MuiDialogActions-root":{padding:n.spacing(1)}}));na.node,na.func.isRequired;const ya=oa(Ha)(({theme:n})=>`
      background-color: ${n.colors.alpha.white[100]};
      padding-right: ${n.spacing(.7)}
  `),Oa=(n,i,f)=>(n==null?void 0:n.length)>0?n==null?void 0:n.slice(i*f,i*f+f):[],ae=n=>{const i={ACTIVE:{text:"ACTIVE",color:"warning"},PAID:{text:"PAID",color:"primary"},Submitted:{text:"Submitted",color:"success"}},{text:f,color:I}=i[n];return l(W,{color:I,children:f})},ee=({cryptoOrders:n,statusName:i,streamName:f})=>{var Q,z;const I=Ua(),T=Ra(),[b,g]=c.useState(localStorage.getItem("searchOption")?localStorage.getItem("searchOption"):"name"),x=ia(a=>a.student.allNonLoggedPlagiarismDetails),E=Va();Qa(E.breakpoints.down("md"));const[B,P]=c.useState(!1),[s,w]=c.useState(null),[r,h]=c.useState(null),R=()=>{P(!1)},ca=a=>{if(a===""){v.error("File name is empty");return}console.log(r),A.get(`${D}/team/downloadplagcheckfiles.php?assignment_id=${r}&file_name=${a}`).then(e=>{var t,m,N;if(console.log(e),((t=e==null?void 0:e.data)==null?void 0:t.status)==="success"){v.success("File downloaded successfully");let L=(m=e==null?void 0:e.data)==null?void 0:m.file_url,S=document.createElement("a");S.href=L,S.setAttribute("download",(N=e==null?void 0:e.data)==null?void 0:N.file_name),document.body.appendChild(S),S.click(),S.parentNode.removeChild(S)}else v.error("Something went wrong")}).catch(e=>{console.log(e),v.error("Something went wrong")})},[ma,ua]=c.useState(!1),[ha,le]=c.useState(null),$=()=>{ua(!1),T(ea({...x,assignment_files:null,assignment_files_random_number:null}))},ga=async a=>{if(!x.assignment_files){v.error("Please Upload A File");return}const e={...x,assignment_id:ha,submit:"submit"};console.log(e),await A.post(`${D}/team/submitfilesplagiarismcheck.php`,e).then(t=>{console.log(t),v.success(t.data.message),T(ea({...x,assignment_files:null,assignment_files_random_number:null})),$()}).catch(t=>{console.log(t),v.error("Something went wrong")})},[u,te]=c.useState([]),da=u.length>0,[V,fa]=c.useState(0),[K,xa]=c.useState(50),q=Ya().pathname.split("/assignments")[1],[_,j]=c.useState({status:i}),[Sa,ne]=c.useState({stream:f}),[k,M]=c.useState({search:null}),G=localStorage.getItem("currentId");c.useEffect(()=>{if(localStorage.getItem("search")){let a=JSON.parse(localStorage.getItem("search"));Object.values(a).forEach((e,t)=>{M(m=>({...m,search:e}))})}if(localStorage.getItem("status")){let a=JSON.parse(localStorage.getItem("status"));Object.values(a).forEach((e,t)=>{j(m=>({...m,status:e}))})}},[q]),c.useEffect(()=>{G||(localStorage.removeItem("search"),localStorage.removeItem("status"),localStorage.removeItem("currentId"),localStorage.removeItem("searchOption"),M(a=>({...a,search:null})),j(a=>({...a,status:i})),g("name"))},[q,G]);const ba=[{id:"all",name:"All"},{id:"PAID",name:"PAID"},{id:"ACTIVE",name:"ACTIVE"},{id:"Submitted",name:"SUBMITTED"}],F=(a,e)=>a==null?void 0:a.filter(t=>{var N,L,S,X,Z,y;let m=!0;return e!=null&&e.status&&(t==null?void 0:t.status)!==(e==null?void 0:e.status)&&(m=!1),e!=null&&e.stream&&(t==null?void 0:t.stream)!==(e==null?void 0:e.stream)&&(m=!1),b==="id"?e!=null&&e.search&&!((L=t==null?void 0:t.id)!=null&&L.toLowerCase().includes((N=e==null?void 0:e.search)==null?void 0:N.toLowerCase()))&&(m=!1):b==="name"?e!=null&&e.search&&!((X=t==null?void 0:t.user_name)!=null&&X.toLowerCase().includes((S=e==null?void 0:e.search)==null?void 0:S.toLowerCase()))&&(m=!1):b==="amount"&&e!=null&&e.search&&!((y=t==null?void 0:t.amount)!=null&&y.toLowerCase().includes((Z=e==null?void 0:e.search)==null?void 0:Z.toLowerCase()))&&(m=!1),m}),ra=a=>{let e=null;a.target.value!=="all"&&(e=a.target.value),a.target.value==="all"&&(e=null),j(m=>({...m,status:e}));let t=JSON.stringify({status:a.target.value});localStorage.setItem("status",t)},wa=(a,e)=>{fa(e)},va=a=>{xa(parseInt(a.target.value))},p=F(n,_),Ia=F(p,Sa),Na=F(Ia,k),U=Oa(Na,V,K),Ca=a=>{let e=null;a.target.value!==""&&(e=a.target.value),a.target.value===""&&(e=null),M(m=>({...m,search:e}));let t=JSON.stringify({search:a.target.value});localStorage.setItem("search",t)};return(u==null?void 0:u.length)>0&&(u==null?void 0:u.length)<(n==null?void 0:n.length),u==null||u.length,n==null||n.length,o(H,{children:[o(Aa,{children:[!da&&l(Da,{action:l("div",{className:"flex items-start md:justify-end md:w-[35rem] w-[20rem]",children:l("div",{className:"flex items-center justify-start w-2/3 ",children:o(ta,{fullWidth:!0,variant:"outlined",children:[l(Ka,{children:"Status"}),l(qa,{value:(_==null?void 0:_.status)||"all",onChange:ra,label:"Status",autoWidth:!0,children:ba.map(a=>l(Za,{value:a==null?void 0:a.id,children:a==null?void 0:a.name},a==null?void 0:a.id))})]})})})}),l(ta,{variant:"outlined",fullWidth:!0,sx:{p:2},children:l(ya,{type:"text",value:(k==null?void 0:k.search)||"",onChange:Ca,placeholder:"Search text here...",startAdornment:o(Ta,{position:"start",children:[l(Ga,{}),o("div",{className:"flex gap-2",children:[l(W,{sx:{cursor:"pointer"},onClick:()=>{console.log("Assignment Id"),g("id"),JSON.stringify(localStorage.setItem("searchOption","id"))},color:b==="id"?"success":"info",children:"ID"}),l(W,{sx:{cursor:"pointer"},onClick:()=>{console.log("Name"),g("name"),JSON.stringify(localStorage.setItem("searchOption","name"))},color:b==="name"?"success":"info",children:"Name"}),l(W,{sx:{cursor:"pointer"},onClick:()=>{g("amount"),JSON.stringify(localStorage.setItem("searchOption","amount"))},color:b==="amount"?"success":"info",children:"Amount"})]})]})})}),l(Pa,{}),l(_a,{children:o(ka,{children:[l(pa,{children:o(O,{children:[l(d,{className:"w-[10rem]",children:"Assignment ID"}),l(d,{children:"User Name"}),l(d,{children:"Amount"}),l(d,{children:"Status"}),l(d,{children:"Submission Date"})]})}),l(La,{children:U==null?void 0:U.map(a=>{var t;const e=u==null?void 0:u.includes(a==null?void 0:a.id);return l(H,{children:o(O,{hover:!0,selected:e,children:[l(d,{children:l(C,{sx:{cursor:"pointer"},onClick:()=>I(`/team/management/plagiarism/newuser/details/${a==null?void 0:a.id}`),variant:"body1",fontWeight:"bold",color:"#3f51b5",gutterBottom:!0,noWrap:!0,children:a==null?void 0:a.id})}),l(d,{children:o(C,{sx:{cursor:"pointer"},variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:[a==null?void 0:a.name,l("br",{})]})}),l(d,{sx:{maxWidth:"300px",wordBreak:"break-all"},children:o(C,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,children:["â‚¹",(t=a==null?void 0:a.amount)==null?void 0:t.toLocaleString("en-US",{style:"currency",currency:"INR"})]})}),l(d,{sx:{maxWidth:"300px",wordBreak:"break-all"},children:l(C,{variant:"body1",fontWeight:"bold",color:"text.primary",gutterBottom:!0,noWrap:!0,children:(a==null?void 0:a.status)===""?"In Progress":ae(a==null?void 0:a.status)})}),l(d,{sx:{maxWidth:"200px",wordBreak:"break-all"},children:l(C,{variant:"body1",fontWeight:"bold",gutterBottom:!0,whiteSpace:"nowrap",children:za(a==null?void 0:a.submission_date,"DD-MM-YYYY HH:mm:ss").format("Do MMMM YYYY h:mm:ss a")})})]},a==null?void 0:a.id)})})})]})}),l(sa,{p:2,children:l(Wa,{component:"div",count:p==null?void 0:p.length,onPageChange:wa,onRowsPerPageChange:va,page:V,rowsPerPage:K,rowsPerPageOptions:[5,10,25,30,50,75,100,200]})})]}),o(J,{open:B,onClose:R,maxWidth:!0,children:[l(Ea,{children:"Download Assignment Files"}),l("div",{className:"flex flex-col  items-center justify-center   p-5  w-full gap-[20px] p-2 ",children:o(aa,{className:"w-[100%] flex flex-col gap-5",children:[l("div",{className:"w-full text-gray-600 ",children:l("div",{className:"flex flex-wrap ",children:l("div",{className:"flex flex-col  rounded-lg sm:flex-row",children:l("div",{className:"flex-grow flex-col flex items-start justify-start",children:(z=(Q=s==null?void 0:s.split("_$_"))==null?void 0:Q.filter(a=>a!==""))==null?void 0:z.map((a,e)=>o("div",{onClick:()=>ca(a),className:"flex items-center justify-between gap-5",children:[o("p",{className:"text-base leading-relaxed flex text-left text-white break-all",children:[o("span",{className:"text-purple-400 font-semibold text-xl pr-3",children:[e+1,"."]})," ",a]}),l("button",{className:"inline-flex items-center justify-center flex-shrink-0   text-indigo-500 rounded-full sm:mr-8 sm:mb-0",children:l(Ba,{})})]},e))})})})}),l("div",{className:"flex gap-5",children:l(Y,{onClick:R,children:"Close"})})]})})]}),l(J,{open:ma,onClose:$,maxWidth:!0,children:l("div",{className:"flex flex-col  items-center justify-center   p-5  w-full gap-[20px] p-2 ",children:o(aa,{className:"w-[100%] flex flex-col gap-2",children:[l(Xa,{}),o("div",{className:"flex gap-5",children:[l(Y,{className:"bg-blue141 text-white",onClick:()=>{ga()},children:"Submit"}),l(Y,{onClick:$,children:"Close"})]})]})})})]})},Ie=()=>{var P;const{id:n}=Ja(),i=ia($a),f={name:(P=i==null?void 0:i.teamData)==null?void 0:P.name,avatar:"/static/images/avatars/1.jpg"},I=i==null?void 0:i.id,T=["Technical pm","Non-Technical pm"],b=["Technical hr","Non-Technical hr"],[g,x]=c.useState([]),[E,B]=c.useState([]);return c.useEffect(()=>{T.includes(i==null?void 0:i.teamDomain)?A.get(`${D}/team/pmdetails.php?pm_id=${I}`).then(s=>{x(s==null?void 0:s.data[1])}).catch(s=>{console.log(s)}):b.includes(i==null?void 0:i.teamDomain)?A.get(`${D}/team/plagtable.php`).then(s=>{var w,r;(i==null?void 0:i.teamDomain)==="Technical hr"?x((w=s==null?void 0:s.data)==null?void 0:w.filter(h=>(h==null?void 0:h.domain)==="Technical")):x((r=s==null?void 0:s.data)==null?void 0:r.filter(h=>(h==null?void 0:h.domain)==="Non-Technical"))}).catch(s=>{console.log(s)}):A.get(`${D}/team/plagtable.php`).then(s=>{console.log(s),x(s==null?void 0:s.data)}).catch(s=>{console.log(s)})},[]),c.useEffect(()=>{if(n){const s=g==null?void 0:g.filter(w=>{var r;return(r=w==null?void 0:w.freelancers)==null?void 0:r.map(h=>h==null?void 0:h.id).includes(n)});B(s)}},[n,g,i==null?void 0:i.teamDomain]),o(H,{children:[l(ja,{children:l("title",{children:"All New Users Plagiarism"})}),l(Ma,{children:l(Fa,{title:"All New Users Plagiarism",subtitle:`${f.name}, these are all available plagiarism files.`})}),l(sa,{fullwidth:"true",sx:{mx:2},children:l(la,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,children:l(la,{item:!0,xs:12,children:l(ee,{statusName:null,streamName:null,cryptoOrders:n?E:g,id:n})})})})]})};export{Ie as default};
