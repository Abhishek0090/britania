import{a as m}from"./react-31052980.js";import{d as me}from"./chevron-left-00fe92ff.js";import{u as Z,a,F as D,j as t,_ as d}from"./index-a4114ef4.js";import{s as ce,d as k,U as $,W as ue,aa as ge,aH as fe,m as he,aN as j,aM as pe}from"./main-1d195725.js";import{S as be,am as xe,aK as y,aL as N,aM as A}from"./freelancerSlice-60742dc0.js";import{h as K}from"./moment-fbc5633a.js";import{A as _e}from"./Autocomplete-9f58a83a.js";import{b as we,C as ye}from"./TextField-d5ff1ee4.js";import{C as ve}from"./circle-e0351cb4.js";import{R as Se,a as Ne}from"./RadioGroup-a75dd518.js";import{M as Ae,a as Ce}from"./index.esm-b6ccaf88.js";import{L as Le}from"./loader-2-0dcaac2c.js";import{T as Fe}from"./trash-6f040b71.js";import{A as Ie}from"./arrow-right-circle-12522627.js";import"./MenuItem-030e42a2.js";import"./FormGroup-e9548f89.js";import"./Tabs-ce9635ac.js";const p=10,Pe=5242880,B=["Software","Hardware"];function We(){var O,U,H,V;const v=be(),s=Z(e=>e.student.allProgrammingDetails),C=Z(ce),[Q,ee]=m.useState([]),[u,R]=m.useState([]);m.useEffect(()=>{if(localStorage.getItem("Assignform")){let e=JSON.parse(localStorage.getItem("Assignform"));ee(e[0].Step1),console.log(e[0].Step1)}else console.log("no form found"),q("/freelance")},[localStorage.getItem("Assignform")]);const[te,ne]=m.useState(null),[g,E]=m.useState([]),[L,re]=m.useState(null),[De,M]=m.useState(!1),[T,S]=m.useState(!1),[le,F]=m.useState(!1),Y=m.useRef(null),q=me(),I=["Diploma","Bachelors","Masters","PhD"],ae=async e=>{let n=[...g],o=!1;S(!0),e.forEach(r=>{if(n.length<p){if(r.size>Pe){d.error("File size is too large"),S(!1);return}n.push(r)}else o=!0,d.error("You can upload maximum 10 files"),S(!1)}),E(n);let i=JSON.parse(localStorage.getItem("assignment_files_random_number")?localStorage.getItem("assignment_files_random_number"):L),c={programming_assignment:n,submit:"submit",random_number:i||L};await k.post(`${$}/student/fileuploadsubmitassignmentprgoramming.php`,c,{headers:{"Content-Type":"multipart/form-data"}}).then(r=>{var b,x,_,w;re((b=r==null?void 0:r.data)==null?void 0:b.random_number),localStorage.setItem("assignment_files_random_number",(x=r==null?void 0:r.data)==null?void 0:x.random_number),v(j({assignment_files:(_=r==null?void 0:r.data)==null?void 0:_.file_name_string,assignment_files_random_number:(w=r==null?void 0:r.data)==null?void 0:w.random_number})),console.log(r)}).catch(r=>{console.log(r)}),S(!1),M(!!o)},se=e=>{var b,x,_,w,J,X,G,W;let n=JSON.parse(localStorage.getItem("assignment_files_random_number")?localStorage.getItem("assignment_files_random_number"):L),o=e.split(`${n}`)[1];console.log(e);let i=[...g],c=i.findIndex(f=>f===o);if(c===-1){let f=(w=(_=(x=(b=s==null?void 0:s.assignment_files)==null?void 0:b.split("_$_"))==null?void 0:x.filter(P=>P!==""))==null?void 0:_.filter(P=>P!==e))==null?void 0:w.join("_$_");v(j({assignment_files:f}))}i.splice(c,1);let r=(W=(G=(X=(J=s==null?void 0:s.assignment_files)==null?void 0:J.split("_$_"))==null?void 0:X.filter(f=>f!==""))==null?void 0:G.filter(f=>f!==e))==null?void 0:W.join("_$_");v(j({assignment_files:r})),Y.current.value=null,E(i)};console.log(g);const l=xe({enableReinitialize:!0,initialValues:{student_user_id:"",title:"",assignment_type:[],description:"",level:"",deadline:"",budget:""},onSubmit:async e=>{let n=!1;if(e.student_user_id||(d.error("Please Select Student"),n=!0),e.title||(d.error("Please Enter Assignment title"),n=!0),e.assignment_type.length===0&&(d.error("Please Select Assignment type"),n=!0),e.description||(d.error("Please Enter Assignment description"),n=!0),e.deadline||(d.error("Please Enter Deadline"),n=!0),e.level||(d.error("Please Select Assignment level"),n=!0),e.budget||(d.error("Please Enter Assignment Budget"),n=!0),n)return;F(!0);const o={...e,user_id:e.student_user_id,team_member_id:C==null?void 0:C.teamData.id,assignment_files:s==null?void 0:s.assignment_files,assignment_files_random_number:s==null?void 0:s.assignment_files_random_number,domain:"Freelancer Programming",stream:"Programming",submit:"submit"};console.log(o),await k.post(`${$}/team/submitassignmentprogramming.php`,o).then(i=>{console.log(i),d.success("Assignment Posted Successfully"),v(pe()),F(!1),q(-1)}).catch(i=>{console.log(i),F(!1),d.error("Something went wrong")})}});m.useEffect(()=>{l.setFieldValue("assignment_type",u)},[u]);const h=e=>{if(l.errors[e]){d.error(l.errors[e]);return}l.setFieldValue(e,l.values[e])},[z,ie]=m.useState([]);m.useEffect(()=>{k.get(`${$}/team/studentstable.php`).then(e=>{ie(e.data)}).catch(e=>console.log(e))},[]);const oe=e=>e?`id: ${e.id} name: ${e.firstname} ${e.lastname}`:"",de=z.find(e=>e.id===l.values.student_user_id);return a(D,{children:[" ",t(ue,{children:t("title",{children:"Programming Assignment"})}),a("div",{className:"  drop-shadow shadow-2xl rounded-xl py-8 md:my-5 flex-col bg-white bg-opacity-20  max-w-[70rem] mt-8 mb-6 mx-auto flex   px-5 md:px-0  items-center",children:[t("div",{className:"flex flex-col items-center justify-center gap-2 md:flex-row",children:t("div",{className:" py-5 max-w-[100rem] mx-auto flex md:flex-row flex-col px-5 md:px-0 justify-between items-center",children:t("button",{className:"flex-col max-w-sm px-10 bg-white border border-gray-200 rounded-lg shadow-2xl  backdrop-blur-3xl",children:t("div",{className:"p-5",children:t("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 ",children:Q})})})})}),a("section",{id:"generalothers",children:[t("label",{className:"block mt-4 mb-2 text-center text-xl font-medium ",children:"General Details Section"}),a("div",{className:"flex flex-col md:w-[45rem] w-[20rem]",children:[t(_e,{options:z,getOptionLabel:oe,filterOptions:(e,{inputValue:n})=>{const o=n.toLowerCase();return e.filter(i=>i.id.toLowerCase().includes(o)||i.firstname.toLowerCase().includes(o)||i.lastname.toLowerCase().includes(o))},name:"student_user_id",type:"text",id:"student_user_id",value:de||null,onChange:(e,n)=>{l.setFieldValue("student_user_id",n?n.id:"")},onBlur:()=>h("student_user_id"),renderInput:e=>t(we,{...e,variant:"outlined",required:!0,sx:{marginTop:"1rem",marginBottom:"2rem",width:"100%",borderRadius:"25px"},label:"Student User Id",placeholder:"Enter the Student Id"})}),t("br",{}),t("span",{className:"text-lg font-semibold text-white-700",children:"Assignment Type (Select Your Type)"}),t("fieldset",{className:"flex flex-wrap items-center justify-start w-full gap-3 py-8",children:B==null?void 0:B.map((e,n)=>{let o=u==null?void 0:u.find(c=>c===e),i=o?"blue141":"white-900";return a("div",{children:[t("input",{type:"checkbox",name:e,value:e,id:e,className:"peer hidden  ",onChange:c=>{c.target.checked?(R([...u,c.target.value]),l.setFieldValue("assignment_type",[...u,c.target.value])):(R(u.filter(r=>r!==c.target.value)),l.setFieldValue("assignment_type",u.filter(r=>r!==c.target.value)))}}),a("label",{htmlFor:e,className:`flex items-center justify-center gap-2 px-3 py-2 text-${i} border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 ${o?` border-${i}  bg-${i}  text-white`:""}`,children:[o?t(ye,{size:20}):t(ve,{size:20}),t("p",{className:"text-sm font-medium",children:e})]})]},n)})}),a(y,{variant:"outlined",required:!0,sx:{marginTop:"1rem",width:"100%"},children:[" ",t(N,{htmlFor:"outlined-adornment-name",children:"Assignment Title"}),t(A,{sx:{borderRadius:"25px"},value:l.values.title,onChange:l.handleChange("title"),onBlur:()=>h("title"),type:"text",id:"title",name:"title",placeholder:"Enter the title of your Assignment",label:"Assignment Title"})]}),a(y,{variant:"outlined",required:!0,sx:{marginTop:"2rem",width:"100%"},children:[" ",t(N,{htmlFor:"outlined-adornment-name",children:"Assignment Description"}),t(A,{sx:{borderRadius:"25px"},value:l.values.description,onChange:l.handleChange("description"),onBlur:()=>h("description"),multiline:!0,type:"text",rows:5,cols:33,id:"description",name:"description",label:"Assignment Description",placeholder:" Describe in more than 100 words about detailed requirements and what\r is to be done in the assignment."})]}),a(y,{sx:{mt:4},variant:"outlined",required:!0,children:[t("span",{className:"text-lg mb-2 font-semibold text-white-700",children:"Level of Assignment"}),t(Se,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:l.values.level,label:"Level of Assignment",onChange:l.handleChange("level"),onBlur:()=>h("level"),children:I==null?void 0:I.map((e,n)=>t("label",{className:"flex items-center justify-center gap-2 px-3 py-2 mx-1 my-1 text-white-900 border rounded-md cursor-pointer hover:border-gray-200 ",children:t(ge,{value:e,label:e,control:t(Ne,{})})},n))})]})]})]}),a("section",{id:"deadlineothers",children:[t("label",{className:"block mt-4 mb-2 text-xl text-center font-medium ",children:"Deadline and Budget Section"}),a("div",{className:"flex flex-col md:w-[45rem] w-[20rem]",children:[a(y,{variant:"outlined",required:!0,sx:{marginTop:"1rem",width:"100%"},children:[" ",t(N,{htmlFor:"outlined-adornment-name",children:"Assignment Budget"}),t(A,{sx:{borderRadius:"25px"},value:(O=l==null?void 0:l.values)==null?void 0:O.budget,onChange:l.handleChange("budget"),onBlur:()=>h("budget"),type:"number",id:"budget",name:"budget",placeholder:"Enter the budget of your Assignment in INR",label:"Assignment Budget"})]}),t(fe,{dateAdapter:Ae,children:t(Ce,{label:"Deadline for the assignment",value:te,minDate:new Date,onChange:e=>{ne(K(e).format("YYYY-MM-DD HH:mm")),l.setFieldValue("deadline",K(e).format("YYYY-MM-DD HH:mm"))},renderInput:e=>a(y,{variant:"outlined",required:!0,sx:{marginTop:"3rem",width:"100%"},children:[" ",t(N,{htmlFor:"outlined-adornment-name",children:"Deadline for the assignment"}),t(A,{onBlur:()=>h("deadline"),sx:{borderRadius:"25px"},...e,placeholder:"Select Deadline of Assignment",label:"Deadline for the assignment"})]})})})]})]}),a("section",{id:"uploadothers",children:[t("label",{className:" mt-4 mb-2 text-xl font-medium flex items-center justify-center",children:"Upload assignment guidelines"}),a("div",{className:"flex flex-col gap-2 md:w-[45rem] w-[20rem] items-center justify-center mt-4 mb-2",children:[(g==null?void 0:g.length)>p?null:t("div",{className:"flex items-center justify-center w-full pb-2 ",children:a("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed  cursor-pointer  dark:hover:bg-bray-800 hover:bg-gray-500  bg-[#000] rounded-xl shadow-lg  bg-opacity-20 backdrop-blur-lg drop-shadow-lg",children:[t(D,{children:T?a("div",{role:"status",className:"flex items-center justify-center gap-2",children:[t(Le,{size:20,className:"animate-spin"}),t("span",{className:"capitalize",children:"Please wait..."})]}):a(D,{children:[t("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t("p",{className:"mb-2 text-sm text-white ",children:t("p",{className:"font-semibold text-center px-5 md:px-2",children:"Upload assignment guidelines and other related files (Can upload max 10 files)"})}),t("p",{className:"text-xs text-white ",children:"PDF, DOC, DOCX, ZIP ,etc up to 5MB each"})]})}),t("input",{multiple:!0,id:"dropzone-file",type:"file",className:"hidden",ref:Y,onChange:e=>{let n=[...e.target.files];if((n==null?void 0:n.length)>p){d.error(`You can upload only ${p} files`);return}if((n==null?void 0:n.length)+(g==null?void 0:g.length)>p){d.error(`You can upload only ${p} files`);return}ae(n)}})]})}),(V=(H=(U=s==null?void 0:s.assignment_files)==null?void 0:U.split("_$_"))==null?void 0:H.filter(e=>e!==""))==null?void 0:V.map((e,n)=>a("div",{className:"flex items-center  justify-between w-full bg-gray-200 text-gray-800 px-2 rounded-lg my-0.5",children:[a("span",{className:"p-1 rounded-lg ",children:[n+1,"."," ",e==null?void 0:e.replace(s==null?void 0:s.assignment_files_random_number,"")]}),t("button",{onClick:()=>{se(e)},className:"m-1 leading-none text-white  rounded-full hover:text-gray-100",children:t(Fe,{color:"red",size:20})})]},n))]})]}),t(he,{loading:le,onClick:l.handleSubmit,variant:"contained",type:"submit",className:"bg-[#141B41]",disabled:T,endIcon:t(Ie,{}),sx:{color:"#fff",borderRadius:"1000px",mt:2,height:"50px","&[disabled]":{backgroundColor:"gray",color:"#fff",opacity:.5,cursor:"not-allowed"},"&:hover":{backgroundColor:"#fff",color:"#000"}},children:"Assign"})]})]})}export{We as default};
