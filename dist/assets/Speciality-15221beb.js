import{a as x}from"./react-31052980.js";import{b as U,a as X,p as Y,P as K,T as G,C as Z}from"./TextField-d5ff1ee4.js";import{T as J,V as D}from"./Tags-651fa0a7.js";import{j as t,u as V,_ as y,a,F as C}from"./index-a4114ef4.js";import{A as ee,c as te,a as re}from"./Autocomplete-9f58a83a.js";import{K as se,E as ne,S as ie,am as le,aP as S,aQ as j,aK as A,aL as M,aM as I,ap as ae,an as oe,ao as $}from"./freelancerSlice-60742dc0.js";import{C as ce}from"./circle-e0351cb4.js";import{L as ue}from"./loader-2-0dcaac2c.js";import{T as de}from"./trash-6f040b71.js";const me=8,pe=te();function he(h){const{data:c,index:u,style:i}=h,g=c[u],d={...i};return t(G,{component:"li",...g[0],noWrap:!0,style:d,children:g[1]})}const Q=x.createContext({}),ge=x.forwardRef((h,c)=>{const u=x.useContext(Q);return t("div",{ref:c,...h,...u})});function fe(h){const c=x.useRef(null);return x.useEffect(()=>{c.current!=null&&c.current.resetAfterIndex(0,!0)},[h]),c}const W=x.forwardRef(function(c,u){const{children:i,...g}=c,d=[];i.forEach(n=>{d.push(n),d.push(...n.children||[])});const b=se(),w=X(b.breakpoints.up("sm"),{noSsr:!0}),o=d.length,f=w?36:48,e=n=>n.hasOwnProperty("group")?48:f,m=()=>o>8?8*f:d.map(e).reduce((n,N)=>n+N,0),_=fe(o);return t("div",{ref:u,children:t(Q.Provider,{value:g,children:t(D,{itemData:d,height:m()+2*me,width:"100%",ref:_,outerElementType:ge,innerElementType:"ul",itemSize:n=>e(d[n]),overscanCount:5,itemCount:o,children:he})})})});W.propTypes={children:Y.node};const xe=ne(K)({[`& .${re.listbox}`]:{boxSizing:"border-box","& ul":{padding:0,margin:0}}});function be({setSubjectTags:h,handleFormBlur:c}){return t(ee,{multiple:!0,freeSolo:!0,id:"virtualize-subject-tags",filterOptions:(u,i)=>{const g=new RegExp(`^${i.inputValue}`,"gi"),d=pe(u,i).filter(o=>g.test(o)),{inputValue:b}=i,w=u.some(o=>b===o);return b!==""&&!w&&d.push(b),d},onChange:(u,i)=>{h(i)},onBlur:()=>c("subject_tags"),disableListWrap:!0,PopperComponent:xe,ListboxComponent:W,options:J,renderInput:u=>t(U,{sx:{["& fieldset"]:{borderRadius:"25px"}},...u,label:"Select or type to add tags",required:!0}),renderOption:(u,i,g)=>[u,i,g.index]})}const v=5,ye=oe().shape({qualification:$().required("Qualification is required"),working_hours:$().required("Working Hours is required")});function Fe({nextStepHandler:h,relevantCheckboxes:c,setUploadedFiles:u,uploadedFiles:i,handleUploadFiles:g,handleDeleteFile:d,loading:b,fileInputRef:w,role:o}){var F,q,z,P,R,B,E,L,O;const f=ie();let e={};o==="Technical"?e=V(r=>r.freelancer.technicalFreelancerFormData):o==="Non Technical"&&(e=V(r=>r.freelancer.nonTechnicalFreelancerFormData));const[m,_]=x.useState(((F=e==null?void 0:e.subject_tags)==null?void 0:F.map(r=>r))||[]),[n,N]=x.useState(((q=e==null?void 0:e.assignment_type)==null?void 0:q.map(r=>r))||[]),s=le({enableReinitialize:!0,initialValues:{assignment_type:n,qualification:(e==null?void 0:e.qualification)||"",working_hours:(e==null?void 0:e.working_hours)||"",subject_tags:m,uploadedFiles:[]},onSubmit:r=>{var l,p,k;if(((l=e==null?void 0:e.past_work_files)==null?void 0:l.length)===0)return y.error("Please Upload Files");if(((p=e==null?void 0:e.subject_tags)==null?void 0:p.length)===0)return y.error("Please Select Subject Tags");if(((k=e==null?void 0:e.assignment_type)==null?void 0:k.length)===0)return y.error("Please Select Assignment Type");h()},validationSchema:ye}),H=r=>{let l=s.values.subject_tags.filter(p=>p!==r);_(l),o==="Technical"?f(S({...e,assignment_type:n,subject_tags:l})):o==="Non Technical"&&f(j({...e,assignment_type:n,subject_tags:l}))};x.useEffect(()=>{s.setFieldValue("subject_tags",m),s.setFieldValue("uploadedFiles",i),s.setFieldValue("assignment_type",n),o==="Technical"?f(S({...e,assignment_type:n,subject_tags:m})):o==="Non Technical"&&f(j({...e,assignment_type:n,subject_tags:m}))},[m,n,i]);const T=r=>{if(s.errors[r]){y.error(s.errors[r]);return}s.setFieldValue(r,s.values[r]),o==="Technical"?f(S({...e,[r]:s.values[r]})):o==="Non Technical"&&f(j({...e,[r]:s.values[r]}))};return a(C,{children:[t("label",{className:"block mt-4 mb-2 text-xl font-medium ",children:"Speciality Section"}),a("div",{className:"flex flex-col md:w-[50rem] w-[20rem] ",children:[t("div",{className:"flex flex-col items-center justify-center",children:t("fieldset",{className:"flex flex-wrap items-center justify-center w-full max-w-2xl gap-3 py-8",children:c==null?void 0:c.map((r,l)=>a("div",{children:[t("input",{type:"checkbox",name:r,value:r,id:r,className:"peer hidden [&:checked_+_label_svg]:block",onChange:p=>{p.target.checked?N([...n,p.target.value]):N(n.filter(k=>k!==p.target.value))}}),a("label",{htmlFor:r,className:`flex items-center justify-center gap-2 px-3 py-2 text-gray-900 border border-gray-100 rounded-md cursor-pointer hover:border-gray-200 
                    ${n!=null&&n.find(p=>p===r)?" peer-checked:border-blue141 peer-checked:bg-blue141 peer-checked:text-white":""}
                  `,children:[n!=null&&n.find(p=>p===r)?t(Z,{size:20}):t(ce,{size:20}),t("p",{className:"text-xs font-medium  md:text-sm",children:r})]})]},l))})}),a(A,{variant:"outlined",required:!0,sx:{marginTop:"1rem",width:"100%"},children:[t(M,{htmlFor:"outlined-adornment-name",children:"Qualification"}),t(I,{sx:{borderRadius:"25px"},value:s.values.qualification,onChange:s.handleChange("qualification"),onBlur:()=>T("qualification"),error:s.touched.qualification&&Boolean(s.errors.qualification),variant:"outlined",type:"text",id:"qualification",name:"qualification",label:"Qualification",placeholder:" Qualification (e.g. BE, B.Tech, MBA, etc.)"})]}),t("div",{className:"relative flex flex-row flex-shrink-0 pt-10 ",children:a(A,{variant:"outlined",required:!0,sx:{marginBottom:"1rem",width:"100%"},children:[t(M,{htmlFor:"outlined-adornment-name",children:"Working Hours"}),t(I,{sx:{borderRadius:"25px"},value:s.values.working_hours,onChange:s.handleChange("working_hours"),onBlur:()=>T("working_hours"),error:s.touched.working_hours&&Boolean(s.errors.working_hours),type:"text",id:"working_hours",name:"working_hours",label:"Working Hours",placeholder:" Any specific working hours? (e.g. 9am to 5pm)"})]})}),t("br",{}),t(be,{setSubjectTags:_,handleFormBlur:T}),t("br",{}),(m==null?void 0:m.length)>0&&t("span",{className:"block mt-4 mb-2 text-sm font-medium",children:"Your saved subject tags are:"}),t("label",{className:"block  mb-2 text-sm font-medium",children:m==null?void 0:m.map((r,l)=>a("span",{className:"inline-flex items-center px-2.5 py-0.5 mr-2 mt-2 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r,a("button",{type:"button",className:"flex-shrink-0 ml-0.5 h-4 w-4 rounded-full inline-flex items-center justify-center text-blue-400 hover:bg-blue-200 hover:text-blue-500",onClick:()=>{H(r)},children:[t("span",{className:"sr-only",children:"Remove tag"}),t("svg",{className:"h-2 w-2",stroke:"currentColor",fill:"none",viewBox:"0 0 8 8",children:t("path",{strokeLinecap:"round",strokeWidth:1.5,d:"M1 1l6 6m0-6L1 7"})})]})]},l))}),t("div",{className:"flex flex-col items-center justify-center pt-5 ",children:a("div",{className:"flex flex-col items-start justify-start w-full max-w-xl pt-1 pb-10",children:[(i==null?void 0:i.length)>v?null:t("div",{className:"flex items-center justify-center w-full pb-2 ",children:a("label",{className:"flex flex-col items-center w-full px-4 py-6 tracking-wide uppercase border rounded-lg shadow-lg cursor-pointer text-blue border-blue hover:bg-blue hover:text-gray-400",children:[t(C,{children:b?a("div",{role:"status",className:"flex items-center justify-center gap-2",children:[t(ue,{size:20,className:"animate-spin"}),t("span",{className:"capitalize",children:"Please wait..."})]}):a(C,{children:[t("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:t("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),a("span",{className:"mt-2 text-base leading-normal",children:[" ","Upload your past work samples"]}),a("span",{className:"mt-2 text-base leading-normal",children:[" ","(Can upload max 5 files)"]}),t("p",{className:"text-xs text-gray-500 ",children:"PDF, DOC, DOCX, ZIP ,etc up to 5MB each"})]})}),t("input",{type:"file",className:"hidden",ref:w,multiple:!0,onChange:r=>{let l=[...r.target.files];if(l.length>v){y.error(`You can upload only ${v} files`);return}if(l.length+i.length>v){y.error(`You can upload only ${v} files`);return}g(l)}})]})}),(R=(P=(z=e==null?void 0:e.past_work_files)==null?void 0:z.split("_$_"))==null?void 0:P.filter(r=>r!==""))==null?void 0:R.map((r,l)=>a("div",{className:"flex items-center  justify-between w-full bg-gray-200 text-gray-800 px-2 rounded-lg my-0.5",children:[a("span",{className:"p-1 rounded-lg break-all",children:[l+1,"."," ",r==null?void 0:r.replace(e==null?void 0:e.past_work_files_random_number,"")]}),t("button",{onClick:()=>{d(r)},className:"m-1 leading-none text-white  rounded-full hover:text-gray-100",children:t(de,{color:"red",size:20})})]},l))]})})]}),t("button",{disabled:b||((B=s==null?void 0:s.values)==null?void 0:B.working_hours)===""||((L=(E=s==null?void 0:s.values)==null?void 0:E.subject_tags)==null?void 0:L.length)===0||(e==null?void 0:e.past_work_files)===null||((O=s==null?void 0:s.values)==null?void 0:O.qualification)==="",type:"submit",onClick:s.handleSubmit,className:"flex flex-row items-center justify-center w-32 py-1 mt-5 mb-10 text-lg rounded-full right-10 md:font-SemiBold md:text-xl text-blue141 md:py-3 md:w-48 disabled:text-gray-400 disabled:cursor-not-allowed disabled:opacity-50",children:a("span",{className:"items-center  flex justify-center flex-row ",children:[t("span",{className:"mr-1 md:mr-2 mb-1",children:"Next"}),t(ae,{className:"w-5 h-5 "})]})})]})}export{Fe as default};
