import{a as f}from"./react-31052980.js";import{r as Y,k as F,l as O,s as ne,f as g,bu as Ye,bv as vt,bw as xt,a5 as B,aa as J,bx as D,e as de,i as ae,g as De,aE as oe,a3 as H,d as M,U as I,q as ve,D as Z,x as Fe,c as V,C as Ce,by as Oe,h as pt,a9 as $e,V as et,bz as bt,bA as wt,W as _t,ba as yt,bb as gt}from"./main-1d195725.js";import{d as Ct,a as $t,T as xe,b as pe,c as be,e as Nt,f as we,g as _e,D as Ne,h as ye,i as kt,r as zt}from"./draftjs-to-html-f885f408.js";import{u as ie,a as o,j as e,F as k,_ as b}from"./index-a4114ef4.js";import{d as se,C as St,h as Tt}from"./chevron-left-00fe92ff.js";import{T as y,I as le,b as At,a as jt,p as Ue}from"./TextField-d5ff1ee4.js";import{d as Ht}from"./MoreVertTwoTone-502dd3b1.js";import{F as ge}from"./FormGroup-e9548f89.js";import{aZ as tt,K as Te,U as Lt,E as Ae,aK as ke,aM as rt,ap as Mt}from"./freelancerSlice-60742dc0.js";import{M as ce}from"./MenuItem-030e42a2.js";import{d as It}from"./EmailTwoTone-55f26935.js";import{d as Rt}from"./WhatsApp-ed647a29.js";import{h as ze}from"./moment-fbc5633a.js";import{L as Ke}from"./ListItemText-a11f0774.js";import{L as Pt}from"./index-4db24ebd.js";import{T as K}from"./index-27986fb2.js";import{d as Wt}from"./School-4e62a5d4.js";import{d as Vt}from"./Close-f7f15c66.js";import{D as qt}from"./DialogContentText-e2ca03e0.js";import{d as Se}from"./SearchTwoTone-880281d3.js";import{C as ee}from"./Autocomplete-9f58a83a.js";import{d as Et}from"./LocalPhoneTwoTone-d4da98b4.js";import{T as Bt,a as Yt}from"./Tabs-ce9635ac.js";import"./trash-6f040b71.js";import"./arrow-right-circle-12522627.js";import"./ListItemIcon-7f281cf3.js";import"./Switch-6b5643a0.js";var je={},Ft=F;Object.defineProperty(je,"__esModule",{value:!0});var ot=je.default=void 0,Ot=Ft(Y()),Ge=O,Ut=(0,Ot.default)([(0,Ge.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3h7zM7 9H4V5h3v4zm10 6h3v4h-3v-4zm0-10h3v4h-3V5z"},"0"),(0,Ge.jsx)("path",{d:"M7 5v4H4V5h3m13 0v4h-3V5h3m0 10v4h-3v-4h3",opacity:".3"},"1")],"AccountTreeTwoTone");ot=je.default=Ut;function Kt({id:t,assignmentDetails:c}){var $;const m=se(),z=ie(ne);return($=z==null?void 0:z.teamData)==null||$.name,o("div",{className:"flex items-center justify-between gap-2",children:[e(g,{children:e(Ye,{onClick:()=>{c!=null&&c.previous_assignment_id&&(m(`/team/management/assignments/details/${Number(c==null?void 0:c.previous_assignment_id)}`),console.log("prev"))},sx:{cursor:"pointer"},variant:"rounded",children:e(Ct,{fontSize:"large"})})}),e(g,{children:o(y,{variant:"h3",component:"h3",gutterBottom:!0,children:["Assignment Id: ",t]})}),e(g,{children:e(Ye,{onClick:()=>{c!=null&&c.next_assignment_id&&(m(`/team/management/assignments/details/${Number(c==null?void 0:c.next_assignment_id)}`),console.log("next"))},sx:{cursor:"pointer"},variant:"rounded",children:e($t,{fontSize:"large"})})})]})}var He={},Gt=F;Object.defineProperty(He,"__esModule",{value:!0});var lt=He.default=void 0,Qt=Gt(Y()),Qe=O,Xt=(0,Qt.default)([(0,Qe.jsx)("path",{d:"M15 17H9v-1H5v3h14v-3h-4zM4 14h5v-3h6v3h5V9H4z",opacity:".3"},"0"),(0,Qe.jsx)("path",{d:"M20 7h-4V5l-2-2h-4L8 5v2H4c-1.1 0-2 .9-2 2v5c0 .75.4 1.38 1 1.73V19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-3.28c.59-.35 1-.99 1-1.72V9c0-1.1-.9-2-2-2zM10 5h4v2h-4V5zm9 14H5v-3h4v1h6v-1h4v3zm-8-4v-2h2v2h-2zm9-1h-5v-3H9v3H4V9h16v5z"},"1")],"BusinessCenterTwoTone");lt=He.default=Xt;function Zt({assignmentDetails:t,id:c,fetchAssignmentDetails:m}){const z=f.useRef(null),w=ie(ne),T=["Technical hr","Non-Technical hr"],[$,A]=f.useState({setting:!1,reason:!1,delete:!1}),R=se(),P=d=>{d==="setting"?A(N=>({...N,setting:!0})):d==="reason"?A(N=>({...N,reason:!0})):d==="delete"&&A(N=>({...N,delete:!0}))},S=d=>{d==="setting"?A(N=>({...N,setting:!1})):d==="reason"?A(N=>({...N,reason:!1})):d==="delete"&&A(N=>({...N,delete:!1}))},[x,_]=f.useState({posted:!1,under_process:!1,assigned_to_pm:!1,assigned_to_freelancer:!1,completed:!1,review_received:!1,reset:!1,lost:!1,delete:!1}),[i,C]=f.useState({posted:(t==null?void 0:t.posted)==="1",under_process:(t==null?void 0:t.under_process)==="1",assigned_to_pm:(t==null?void 0:t.assigned_to_pm)==="1",assigned_to_freelancer:(t==null?void 0:t.assigned_to_freelancer)==="1",completed:(t==null?void 0:t.completed)==="1",review_received:(t==null?void 0:t.review_received)==="1"}),q=async()=>{_({...x,under_process:!0});try{const d=await M.get(`${I}/team/assignmentstatusunderprocess.php?id=${c}`);b.success(d.data.message),C({...i,under_process:!i.under_process})}catch{b.error("Couldn't update assignment status")}_({...x,under_process:!1})},U=async()=>{_({...x,assigned_to_pm:!0});try{const d=await M.get(`${I}/team/assignmentstatusassignedtopm.php?id=${c}`);b.success(d.data.message),C({...i,assigned_to_pm:!i.assigned_to_pm})}catch{b.error("Couldn't update assignment status")}_({...x,assigned_to_pm:!1})},E=async()=>{_({...x,assigned_to_freelancer:!0});try{const d=await M.get(`${I}/team/assignmentstatusassignedtofreelancer.php?id=${c}`);b.success(d.data.message),C({...i,assigned_to_freelancer:!i.assigned_to_freelancer})}catch{b.error("Couldn't update assignment status")}_({...x,assigned_to_freelancer:!1})},h=async()=>{_({...x,completed:!0});try{const d=await M.get(`${I}/team/assignmentstatuscompleted.php?id=${c}`);b.success(d.data.message),C({...i,completed:!i.completed})}catch{b.error("Couldn't update assignment status")}_({...x,completed:!1})},l=async()=>{_({...x,review_received:!0});try{const d=await M.get(`${I}/team/assignmentstatusreviewreceived.php?id=${c}`);b.success(d.data.message),C({...i,review_received:!i.review_received})}catch{b.error("Couldn't update assignment status")}_({...x,review_received:!1})},u=async()=>{_({...x,reset:!0});try{const d=await M.get(`${I}/team/assignmentreset.php?assignment_id=${c}`);b.success(d.data.message),m()}catch{b.error("Couldn't reset assignment")}_({...x,reset:!1}),S("setting")},[v,L]=f.useState({reason:"",lost:!1}),G=async()=>{_({...x,lost:!0});const d=v.reason;try{const N=await M.post(`${I}/team/assignmentlost.php`,{assignment_id:c,reason:d});console.log(N),b.success(N.data.message),m(),L(te=>({...te,lost:!0})),S("reason"),S("setting")}catch{b.error("Couldn't declare assignment lost")}_({...x,lost:!1})},j=async()=>{_({...x,delete:!0});try{const d=await M.post(`${I}/team/assignmentdelete.php?assignment_id=${c}`);console.log(d),b.success("Assignment Deleted"),R(-1)}catch{b.error("Couldn't Delete the Assignment")}_({...x,delete:!1})};return f.useEffect(()=>{C({posted:(t==null?void 0:t.posted)==="1",under_process:(t==null?void 0:t.under_process)==="1",assigned_to_pm:(t==null?void 0:t.assigned_to_pm)==="1",assigned_to_freelancer:(t==null?void 0:t.assigned_to_freelancer)==="1",completed:(t==null?void 0:t.completed)==="1",review_received:(t==null?void 0:t.review_received)==="1"})},[t]),o(g,{children:[o(g,{className:"flex flex-row-reverse justify-between gap-5",children:[e(y,{variant:"h4",style:{color:"#f44336"},children:t.lost==="1"?"Lost":null}),e(vt,{sx:{px:0,pt:0,display:"flex",gap:"25px"},action:e(g,{children:e(le,{ref:z,onClick:()=>P("setting"),size:"small",color:"primary",children:e(Ht,{})})}),title:"Assignment Status"})]}),o(xt,{sx:{maxWidth:"fit-content"},children:[o(xe,{children:[o(pe,{children:[e(be,{color:"primary",children:e(Nt,{})}),e(we,{})]}),o(_e,{children:[e(y,{variant:"h4",sx:{pb:2},children:"Assignment Details"}),o(ge,{children:[x.posted?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Posted"})]}):e(J,{control:e(D,{color:"primary",disabled:(i==null?void 0:i.posted)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.posted,name:"checkedC",inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Posted"}),x.under_process?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Under Process"})]}):e(J,{control:e(D,{color:"primary",disabled:(i==null?void 0:i.under_process)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.under_process,name:"checkedC",onChange:()=>q(),inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Under Process"})]})]})]}),o(xe,{children:[o(pe,{children:[e(be,{color:"primary",children:e(ot,{})}),e(we,{})]}),o(_e,{children:[e(y,{variant:"h4",sx:{pb:2},children:"Project Management"}),o(ge,{children:[x.assigned_to_pm?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Assigned to PM"})]}):e(J,{control:e(D,{disabled:(i==null?void 0:i.assigned_to_pm)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.assigned_to_pm,color:"primary",name:"checkedC",onChange:()=>U(),inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Assigned to PM"}),x.assigned_to_freelancer?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Assigned to Freelancer"})]}):e(J,{control:e(D,{disabled:(i==null?void 0:i.assigned_to_freelancer)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.assigned_to_freelancer,onChange:()=>E(),color:"primary",name:"checkedC",inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Assigned to Freelancer"})]})]})]}),o(xe,{children:[o(pe,{children:[e(be,{color:"primary",children:e(lt,{})}),e(we,{})]}),o(_e,{children:[e(y,{variant:"h4",sx:{pb:2},children:"Assignment Completion"}),o(ge,{children:[x.completed?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Completed"})]}):e(J,{control:e(D,{disabled:(i==null?void 0:i.completed)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.completed,color:"primary",name:"checked",onChange:()=>h(),inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Completed"})," ",x.review_received?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Review Received"})]}):e(J,{control:e(D,{disabled:(i==null?void 0:i.review_received)||T.includes(w==null?void 0:w.teamDomain),checked:i==null?void 0:i.review_received,color:"primary",name:"checkedC",onChange:()=>l(),inputprops:{"aria-label":"controlled"},sx:{" &.Mui-disabled":{color:"#0047AB"}}}),label:"Review Received"})]})]})]})]}),o(tt,{anchorEl:z.current,onClose:()=>S("setting"),open:$.setting,children:[e(ce,{sx:{px:3},onClick:()=>{u()},children:x.reset?o(k,{children:[e(B,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Reset"})]}):e("span",{children:"Reset"})}),e(ce,{sx:{px:3},onClick:()=>{P("delete")},children:e("span",{style:{color:"#f44336"},children:" Delete"})}),e(ce,{sx:{px:3},onClick:()=>{v.lost||P("reason")},children:e("span",{style:{color:"#918EF4"},children:t.lost=="1"?"Lost":"Declare Lost"})})]}),o(de,{open:$.reason,onClose:()=>S("reason"),children:[e(ae,{children:"Enter Reason for Declaring Lost "}),e(De,{component:"form",className:"p-[20px]",children:e(At,{value:v.reason,onChange:d=>L(N=>({...N,reason:d.target.value})),autoFocus:!0,margin:"dense",id:"reason",name:"reason",label:"Reason",type:"text",className:"w-[500px]",fullWidth:!0,variant:"standard"})}),o("div",{className:"flex justify-end",children:[e(oe,{children:e(H,{className:"bg-blue141 text-white",onClick:()=>{G()},children:"Submit"})}),e(oe,{children:e(H,{onClick:()=>S("reason"),children:"Close"})})]})]}),o(de,{open:$.delete,onClose:()=>S("delete"),children:[e(ae,{children:"Are You Sure You Want to Delete Assignment ?"}),o("div",{className:"flex items-center justify-end gap-[5px] p-2 h-[100px]",children:[e(oe,{children:e(H,{className:"bg-blue141 text-white",onClick:()=>{j()},children:"Confirm"})}),e(oe,{children:e(H,{onClick:()=>S("delete"),children:"Close"})})]})]})]})}var Le={},Jt=F;Object.defineProperty(Le,"__esModule",{value:!0});var nt=Le.default=void 0,Dt=Jt(Y()),Xe=O,er=(0,Dt.default)([(0,Xe.jsx)("path",{d:"M19 17.47c-.88-.07-1.75-.22-2.6-.45l-1.19 1.19c1.2.41 2.48.67 3.8.75v-1.49zM5.03 5c.09 1.32.35 2.59.75 3.8l1.2-1.2c-.23-.84-.38-1.71-.44-2.6H5.03z",opacity:".3"},"0"),(0,Xe.jsx)("path",{d:"M9.07 7.57C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02zm7.33 9.45c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75l1.2-1.19zM5.79 8.8c-.41-1.21-.67-2.48-.76-3.8h1.5c.07.89.22 1.76.46 2.59L5.79 8.8z"},"1")],"PhoneTwoTone");nt=Le.default=er;function tr({userDetails:t,id:c,lostReason:m}){Te();const z=se();return ie(ne),o(g,{children:[o(y,{onClick:()=>{z(`/team/management/student/details-student/${t==null?void 0:t.user_id}`)},sx:{cursor:"pointer"},align:"center",variant:"h4",gutterBottom:!0,children:[t==null?void 0:t.user_first_name," ",t==null?void 0:t.user_last_name]}),e(y,{align:"center",variant:"subtitle2",gutterBottom:!0,children:"Student"}),o(g,{py:2,display:"flex",alignItems:"center",justifyContent:"center",children:[e(ve,{arrow:!0,placement:"top",title:"Call",children:e(le,{component:"a",href:`tel:${t==null?void 0:t.user_number}`,color:"primary",sx:{mx:.5},children:e(nt,{})})}),e(ve,{arrow:!0,placement:"top",title:"Send email",children:e(le,{component:"a",href:`mailto:${t==null?void 0:t.user_email}`,color:"primary",sx:{mx:.5},children:e(It,{})})}),e(ve,{arrow:!0,placement:"top",title:"Whatsapp",children:e(le,{color:"success",sx:{mx:.5},children:e(Rt,{})})})]}),o(Lt,{sx:{px:2},children:[e(Z,{component:"li"}),o(Fe,{sx:{py:1.5},children:[e(Ke,{primary:"Email",primaryTypographyProps:{variant:"subtitle2"}}),e(y,{variant:"subtitle2",color:"text.primary",children:t==null?void 0:t.user_email})]}),e(Z,{component:"li"}),o(Fe,{sx:{py:1.5},children:[e(Ke,{primary:"Phone Number",primaryTypographyProps:{variant:"subtitle2"}}),e(y,{variant:"subtitle2",color:"text.primary",children:t==null?void 0:t.user_number})]})]}),e(g,{className:"flex flex-col gap-5",children:(m==null?void 0:m.reason)&&o(k,{children:[" ",e(y,{variant:"h4",style:{color:"#f44336"},children:"Lost Reason"}),o(y,{variant:"subtitle2",className:"flex items-center gap-5",color:"text.primary",children:[e(y,{variant:"h5",children:"Reason :"})," ",m==null?void 0:m.reason]}),o(y,{variant:"p",color:"text.primary",className:"flex items-center gap-5",children:[e(y,{variant:"h5",children:"Lost On :"})," ",ze(m==null?void 0:m.date).format("MMMM Do YYYY, h:mm:ss a")]})]})})]})}var Me={},rr=F;Object.defineProperty(Me,"__esModule",{value:!0});var it=Me.default=void 0,or=rr(Y()),lr=O,nr=(0,or.default)((0,lr.jsx)("path",{d:"M3 17v-2c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v2c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2zM3 7v2c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2z"}),"ViewStream");it=Me.default=nr;var Ie={},ir=F;Object.defineProperty(Ie,"__esModule",{value:!0});var ct=Ie.default=void 0,cr=ir(Y()),dr=O,ar=(0,cr.default)((0,dr.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"}),"Subtitles");ct=Ie.default=ar;var Re={},sr=F;Object.defineProperty(Re,"__esModule",{value:!0});var dt=Re.default=void 0,hr=sr(Y()),ur=O,mr=(0,hr.default)((0,ur.jsx)("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),"Keyboard");dt=Re.default=mr;var Pe={},fr=F;Object.defineProperty(Pe,"__esModule",{value:!0});var at=Pe.default=void 0,vr=fr(Y()),xr=O,pr=(0,vr.default)((0,xr.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}),"Description");at=Pe.default=pr;var We={},br=F;Object.defineProperty(We,"__esModule",{value:!0});var st=We.default=void 0,wr=br(Y()),_r=O,yr=(0,wr.default)((0,_r.jsx)("path",{d:"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z"}),"TurnedIn");st=We.default=yr;var Ve={},gr=F;Object.defineProperty(Ve,"__esModule",{value:!0});var ht=Ve.default=void 0,Cr=gr(Y()),$r=O,Nr=(0,Cr.default)((0,$r.jsx)("path",{d:"M17 12c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm1.65 7.35L16.5 17.2V14h1v2.79l1.85 1.85-.7.71zM18 3h-3.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H6c-1.1 0-2 .9-2 2v15c0 1.1.9 2 2 2h6.11c-.59-.57-1.07-1.25-1.42-2H6V5h2v3h8V5h2v5.08c.71.1 1.38.31 2 .6V5c0-1.1-.9-2-2-2zm-6 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1z"}),"PendingActions");ht=Ve.default=Nr;var qe={},kr=F;Object.defineProperty(qe,"__esModule",{value:!0});var ut=qe.default=void 0,zr=kr(Y()),Ze=O,Sr=(0,zr.default)([(0,Ze.jsx)("path",{d:"M5 5h14v2H5z",opacity:".3"},"0"),(0,Ze.jsx)("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zm-2.51 4.53-1.06-1.06-4.87 4.87-2.11-2.11-1.06 1.06 3.17 3.17z"},"1")],"EventAvailableTwoTone");ut=qe.default=Sr;var Ee={},Tr=F;Object.defineProperty(Ee,"__esModule",{value:!0});var mt=Ee.default=void 0,Ar=Tr(Y()),jr=O,Hr=(0,Ar.default)((0,jr.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7h7.66z"}),"CurrencyRupeeTwoTone");mt=Ee.default=Hr;const Lr=Ae(de)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function ft(t){const{children:c,onClose:m,...z}=t;return o(ae,{sx:{m:0,p:2},...z,children:[c,m?e(le,{"aria-label":"close",onClick:m,sx:{position:"absolute",right:8,top:8,color:w=>w.palette.grey[500]},children:e(Vt,{})}):null]})}ft.propTypes={children:Ue.node,onClose:Ue.func.isRequired};function Mr({assignmentDetails:t,assignedPM:c,assignedFreelancer:m,id:z}){var C,q,U,E;const w=Te(),T=se();ie(ne);const $=jt(w.breakpoints.down("md")),[A,R]=f.useState(!1),P=()=>{R(!0)},S=()=>{R(!1)},x=h=>{if(h===""){b.error("File name is empty");return}let l="";t.stream==="Programming"?l="downloadprogrammingassignmentfiles":t.stream==="Professional Writing"?l="downloadprofessionalwritingassignmentfiles":t.stream==="Academic Writing"&&(l="downloadacademicwritingassignmentfiles"),M.get(`${I}/team/${l}.php?assignment_id=${z}&file_name=${h}`).then(u=>{var v,L,G;if(console.log(u),((v=u==null?void 0:u.data)==null?void 0:v.status)==="success"){b.success("File downloaded successfully");let j=(L=u==null?void 0:u.data)==null?void 0:L.file_url,d=document.createElement("a");d.href=j,d.setAttribute("download",(G=u==null?void 0:u.data)==null?void 0:G.file_name),document.body.appendChild(d),d.click(),d.parentNode.removeChild(d)}else b.error("Something went wrong")}).catch(u=>{console.log(u),b.error("Something went wrong")})},[_,i]=f.useState(null);return f.useEffect(()=>{M.get(`${I}/team/pmdetails.php?pm_id=${t.submitted_by}`).then(h=>{i(h.data)}).catch(h=>{console.log(h)})},[t]),console.log(t.submission_date),o(k,{children:[o(V,{item:!0,xs:12,md:12,children:[o(Ce,{variant:"outlined",sx:{p:1,background:`${w.colors.alpha.black[5]}`},children:[e("div",{className:"flex items-center justify-between md:mb-5 flex-row ",children:t.files?window.innerWidth>768?e(H,{onClick:P,size:"small",variant:"outlined",color:"success",startIcon:e(Oe,{}),children:"Download Assignment Files"}):e(H,{onClick:P,size:"small",color:"success",variant:"outlined",startIcon:e(Oe,{}),children:"Download Assignment Files"}):null}),o(g,{sx:{mt:3},children:[(t==null?void 0:t.title)!=="NULL"&&e(y,{color:"text.secondary",children:o(K,{sx:{"@media (min-width: 768px)":{fontSize:"1.2rem"},"@media (max-width: 400px)":{fontSize:"1rem"}},children:[e(it,{sx:{mr:1,color:"white"}}),e("span",{className:"text-white",children:"Title:"})," ",e("b",{color:"text.secondary",children:t==null?void 0:t.title})]})}),o(y,{color:"text.secondary",sx:{mt:1},children:[e(ct,{sx:{mr:1}}),"Assignment Level:"," ",e(K,{color:"black",children:e("b",{children:t==null?void 0:t.level})})]}),o(y,{color:"text.secondary",sx:{mt:1},children:[e(Wt,{sx:{mr:1}}),"Assignment Stream:"," ",e(K,{color:"black",children:e("b",{children:t==null?void 0:t.stream})})]}),o(y,{color:"text.secondary",sx:{mt:1},children:[e(dt,{sx:{mr:1}}),"Assignment Type:"," ",e(K,{color:"black",children:e("b",{children:(C=t==null?void 0:t.type)==null?void 0:C.map((h,l)=>e(Pt,{color:"primary",sx:{mr:1,mb:1},children:h},l))})})]}),o(y,{color:"text.secondary",sx:{mt:1},children:[e(at,{sx:{mr:1}}),"Description:"," ",e(K,{color:"black",children:e("b",{children:t==null?void 0:t.description})})]}),o(y,{color:"text.secondary",sx:{mt:1},children:[e(st,{sx:{mr:1}}),"Submitted By:"," ",e(K,{color:"black",children:e("b",{children:(t==null?void 0:t.submitted_by)!="student"?(_==null?void 0:_.map(h=>h.name))||"Not Defined":t==null?void 0:t.submitted_by})})]})]}),e(Z,{sx:{my:2}}),o("div",{className:"flex md:items-center md:justify-between md:flex-row flex-col items-start justify-start gap-10 md:gap-0",children:[o("div",{className:"flex  items-center justify-between flex-row   gap-2",children:[o(y,{sx:{mr:1,color:"green",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(mt,{sx:{mr:1}}),"Budget:"]}),e("span",{children:o("b",{children:["â‚¹ ",t==null?void 0:t.budget]})})]}),o("div",{className:"flex md:items-center md:justify-between md:flex-row flex-col items-start justify-start gap-2",children:[o(y,{sx:{mr:1,color:"red",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(ut,{sx:{mr:1}}),"Deadline:"]}),e("span",{children:ze(t==null?void 0:t.deadline).format("MMMM Do YYYY, h:mm:ss a")})]}),o("div",{className:"flex md:items-center md:justify-between md:flex-row flex-col items-start justify-start gap-2",children:[o(y,{sx:{mr:1,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(ht,{sx:{mr:1}}),"Submission Date:"]}),e("span",{children:ze(t==null?void 0:t.submission_date,"DD-MM-YYYY HH:mm:ss").format("Do MMMM YYYY h:mm:ss a")})]})]})]}),e(Ce,{variant:"outlined",sx:{p:1,mt:2,background:`${w.colors.alpha.black[5]}`},children:o(g,{children:[c!==void 0?o(k,{children:[e(y,{color:"text.primary",variant:"h3",sx:{mt:1},children:"PM Details"}),o(y,{color:"text.secondary",sx:{mt:1,cursor:"pointer"},onClick:()=>{T(`/team/management/pm/details-pm/${c==null?void 0:c.id}`)},children:["Name:"," ",e(K,{color:"info",children:e("b",{children:c==null?void 0:c.name})})]}),o(y,{component:"a",color:"text.secondary",sx:{mt:1},href:`https://wa.me/91${c==null?void 0:c.number}?text=Hi%20I%20am%20interested%20in%20your%20services%20and%20would%20like%20to%20know%20more%20about%20it.`,children:["Number:"," ",e(K,{color:"success",children:e("b",{children:c==null?void 0:c.number})})]})]}):null,(m==null?void 0:m.length)!==0?o(k,{children:[" ",e(Z,{sx:{my:2}}),e(y,{color:"text.primary",variant:"h3",sx:{mt:1},children:"Freelancer Details"}),m==null?void 0:m.map((h,l)=>o("div",{children:[o(y,{color:"text.secondary",sx:{mt:1,cursor:"pointer"},onClick:()=>{T(`/team/management/profile/details/${h==null?void 0:h.id}`)},children:["Name:"," ",e(K,{color:"info",children:e("b",{children:h==null?void 0:h.name})})]}),o(y,{component:"a",color:"text.secondary",sx:{mt:1},href:`https://wa.me/91${h==null?void 0:h.number}?text=Hi%20I%20am%20interested%20in%20your%20services%20and%20would%20like%20to%20know%20more%20about%20it.`,children:["Number:"," ",e(K,{color:"success",children:e("b",{children:h==null?void 0:h.number})})]}),(m==null?void 0:m.length)!==l+1?e(Z,{sx:{my:2}}):null]},l))]}):null]})})]}),o(Lr,{scroll:"paper",fullScreen:$,onClose:S,"aria-labelledby":"customized-dialog-title",open:A,children:[e(ft,{id:"customized-dialog-title",onClose:S,children:"Download Assignment Files"}),e(De,{children:e(qt,{id:"alert-dialog-slide-description",children:e("div",{className:"w-full text-gray-600 ",children:e("div",{className:"flex flex-wrap ",children:e("div",{className:"flex flex-col  rounded-lg sm:flex-row",children:o("div",{className:"flex-grow flex-col flex items-start justify-start",children:[e("span",{className:"flex-grow flex flex-col",children:e("span",{className:"mt-1 text-base font-medium text-gray-900 capitalize",children:"Download Sample Files"})}),(E=(U=(q=t==null?void 0:t.files)==null?void 0:q.split("_$_"))==null?void 0:U.filter(h=>h!==""))==null?void 0:E.map((h,l)=>o("div",{onClick:()=>x(h),className:"flex items-center justify-between gap-5",children:[o("p",{className:"text-base leading-relaxed flex text-left text-white break-all",children:[o("span",{className:"text-purple-400 font-semibold text-xl pr-3",children:[l+1,"."]})," ",h]}),e("button",{className:"inline-flex items-center justify-center flex-shrink-0   text-indigo-500 rounded-full sm:mr-8 sm:mb-0",children:e(pt,{})})]},l))]})})})})})})]})]})}const Je=Ae(rt)(({theme:t})=>`
    background-color: ${t.colors.alpha.white[100]};
    padding-right: ${t.spacing(.7)}
`);function Ir({projectManagers:t,isLoading:c,handleAssignPM:m,assignmentDetailsStream:z}){var E,h;const[w,T]=f.useState([]),[$,A]=f.useState([]),[R,P]=f.useState(""),[S,x]=f.useState("");let _=[],i=[];t&&(_=(E=t==null?void 0:t.filter(l=>(l==null?void 0:l.domain)===z))==null?void 0:E.map(l=>({id:l==null?void 0:l.id,name:l==null?void 0:l.name,number:l==null?void 0:l.number,status:l==null?void 0:l.status,domain:l==null?void 0:l.domain})),i=(h=t==null?void 0:t.filter(l=>(l==null?void 0:l.domain)!==z))==null?void 0:h.map(l=>({id:l==null?void 0:l.id,name:l==null?void 0:l.name,number:l==null?void 0:l.number,status:l==null?void 0:l.status,domain:l==null?void 0:l.domain})));const C=[{field:"id",headerName:"PM ID",minWidth:window.innerWidth>600?150:100,renderCell:l=>{var u,v;return e(et,{to:`/team/management/profile/details/${(u=l==null?void 0:l.row)==null?void 0:u.id}`,className:"flex items-center",children:(v=l==null?void 0:l.row)==null?void 0:v.id})}},{field:"name",headerName:"Full name",minWidth:window.innerWidth>600?250:100,renderCell:l=>{var u;return e("span",{className:"flex items-center",children:(u=l==null?void 0:l.row)==null?void 0:u.name})}},{field:"number",headerName:"Phone Number",minWidth:window.innerWidth>600?250:100,renderCell:l=>{var u,v;return e("a",{href:`tel:${(u=l==null?void 0:l.row)==null?void 0:u.number}`,className:"flex items-center",children:(v=l==null?void 0:l.row)==null?void 0:v.number})}},{field:"domain",headerName:"Domain",minWidth:window.innerWidth>600?180:100,renderCell:l=>{var u,v;return o(k,{children:[((u=l==null?void 0:l.row)==null?void 0:u.domain)==="Non-Technical"&&e(ee,{size:"small",label:"Non-Technical",color:"info"}),((v=l==null?void 0:l.row)==null?void 0:v.domain)==="Technical"&&e(ee,{size:"small",label:"Technical",color:"success"})]})}},{field:"action",headerName:"Assign Task",sortable:!1,minWidth:window.innerWidth>600?200:100,description:"Assign Task to Project Manager Here",renderCell:l=>{var u,v;return e(k,{children:((u=l==null?void 0:l.row)==null?void 0:u.status)==="Not Assigned"?e(k,{children:c[(v=l==null?void 0:l.row)==null?void 0:v.id]?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(H,{onClick:()=>{var L;return m((L=l==null?void 0:l.row)==null?void 0:L.id)},variant:"contained",size:"small",sx:{backgroundColor:"#8C7CF0 !important"},children:"Assign"})}):e(H,{variant:"outlined",size:"small",color:"success",children:"Assigned"})})}}];return o(k,{children:[o("span",{className:"flex text-xl font-bold items-center justify-start mt-5 mb-5",children:[z," Project Managers"]}),e(ke,{variant:"outlined",children:e(Je,{type:"text",value:R,onChange:l=>{if(P(l.target.value),R!==""){const u=_==null?void 0:_.filter(v=>v==null?void 0:v.name.toLowerCase().includes(l.target.value.toLowerCase()));T(u)}},placeholder:"Search name here...",startAdornment:e($e,{position:"start",children:e(Se,{})})})}),e(g,{sx:{mt:3}}),e(g,{sx:{width:"100%"},children:e(Ne,{autoHeight:!0,rows:R!==""?w:_,columns:C,initialState:{pagination:{paginationModel:{pageSize:10}}},disableRowSelectionOnClick:!0,hideFooterPagination:!0})}),e("span",{className:"flex text-xl font-bold items-center justify-start mt-5 mb-5",children:"Other Project Managers"}),e(ke,{variant:"outlined",children:e(Je,{type:"text",value:S,onChange:l=>{if(x(l.target.value),S!==""){const u=i==null?void 0:i.filter(v=>v==null?void 0:v.name.toLowerCase().includes(l.target.value.toLowerCase()));A(u)}},placeholder:"Search name here...",startAdornment:e($e,{position:"start",children:e(Se,{})})})}),e(g,{sx:{mt:3}}),e(g,{sx:{width:"100%"},children:e(Ne,{autoHeight:!0,rows:S!==""?$:i,columns:C,initialState:{pagination:{paginationModel:{pageSize:10}}},disableRowSelectionOnClick:!0,hideFooterPagination:!0})})]})}const Rr={backgroundColor:"#ffffff",color:"#000000",width:"auto",minHeight:"400px"},Pr=Ae(rt)(({theme:t})=>`
    background-color: ${t.colors.alpha.white[100]};
    padding-right: ${t.spacing(.7)}
`),Wr=[{value:"",text:"All"},{value:"inquiry sent",text:"Inquiry Sent"},{value:"inquiry not sent",text:"Inquiry Not Sent"},{value:"assigned",text:"Assigned"},{value:"not assigned",text:"Not Assigned"}];function Vr({freelancers:t,isLoading:c,handleInquiry:m,handleUnassign:z,handleAssign:w}){const[T,$]=f.useState([]),[A,R]=f.useState(""),[P,S]=f.useState(""),x=f.useRef(null),[_,i]=f.useState(!1);console.log(t);let C=[];t&&(C=t==null?void 0:t.map(r=>({id:r==null?void 0:r.id,name:r==null?void 0:r.name,number:r==null?void 0:r.number,country_code:r==null?void 0:r.country_code,swing_status:r==null?void 0:r.swing_status,inquiry_status:r==null?void 0:r.inquiry_status,assigned_status:r==null?void 0:r.assigned_status,whatsapp_number:r==null?void 0:r.whatsapp_number})));const[q,U]=f.useState(ye.EditorState.createEmpty()),E=r=>{U(r)},h=kt(ye.convertToRaw(q.getCurrentContent())),[l,u]=f.useState(!1),[v,L]=f.useState(1),[G,j]=f.useState(null),[d,N]=f.useState(null),te=()=>{u(!1),j(null),N(null),U(ye.EditorState.createEmpty())},he=()=>{L(2)},Q=async r=>{if(q===""){b.error("Please Enter Mail Content");return}if(!h){b.error("Please Enter Comment");return}const n={team_id:auth.teamData.id,assignment_id:G,content:h,submit:"submit"};console.log(n)},ue=[{field:"id",minWidth:window.innerWidth>600?140:100,headerName:"Freelancer ID",renderCell:r=>{var n,a;return e(et,{to:`/team/management/profile/details/${(n=r==null?void 0:r.row)==null?void 0:n.id}`,className:"flex items-center text-blue141 hover:text-gray-200",children:(a=r==null?void 0:r.row)==null?void 0:a.id})}},{field:"name",minWidth:window.innerWidth>600?200:170,headerName:"Full name",renderCell:r=>{var n;return e("span",{className:"flex items-center",children:(n=r==null?void 0:r.row)==null?void 0:n.name})}},{field:"number",minWidth:window.innerWidth>600?200:170,headerName:"Whatsapp Number",renderCell:r=>{var n,a,s,W,p,re;return o("span",{className:"flex flex-col items-center justify-start gap-5",children:[o("span",{className:"flex items-center gap-2",children:[e(Et,{}),e("a",{href:`tel:${(n=r==null?void 0:r.row)==null?void 0:n.number}`,children:(a=r==null?void 0:r.row)==null?void 0:a.number})]}),((s=r==null?void 0:r.row)==null?void 0:s.whatsapp_number)&&o("span",{className:"flex items-center justify-start",children:[e("img",{src:"https://img.icons8.com/color/96/null/whatsapp--v1.png",width:"20px",height:"20px",alt:"whatsapp",className:"mr-2"}),e("a",{href:`
          https://wa.me/${(W=r==null?void 0:r.row)==null?void 0:W.country_code}${(p=r==null?void 0:r.row)==null?void 0:p.whatsapp_number}?text=Hi%20I%20am%20interested%20in%20your%20services%20and%20would%20like%20to%20know%20more%20about%20it.
          `,children:(re=r==null?void 0:r.row)==null?void 0:re.whatsapp_number})]})]})}},{field:"swing_status",minWidth:window.innerWidth>600?150:100,headerName:"Swing Status",renderCell:r=>{var n,a,s,W,p;return e(k,{children:((n=r==null?void 0:r.row)==null?void 0:n.swing_status)!==null||((a=r==null?void 0:r.row)==null?void 0:a.swing_status)==="0"?o(k,{children:[((s=r==null?void 0:r.row)==null?void 0:s.swing_status)==="1"&&e(ee,{size:"small",label:"Partially Available",color:"warning"}),((W=r==null?void 0:r.row)==null?void 0:W.swing_status)==="2"&&e(ee,{size:"small",label:"Fully Available",color:"success"}),((p=r==null?void 0:r.row)==null?void 0:p.swing_status)==="-1"&&e(ee,{size:"small",label:"Not Available",sx:{backgroundColor:"#2856A9 "}})]}):e(ee,{size:"small",label:"Not Set",color:"error"})})}},{field:"send_details",minWidth:window.innerWidth>600?200:100,headerName:"Send Details",renderCell:r=>{var n,a;return e(k,{children:((n=r==null?void 0:r.row)==null?void 0:n.inquiry_status)==="Inquiry Not Sent"?e(k,{children:c[(a=r==null?void 0:r.row)==null?void 0:a.id]?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(H,{variant:"outlined",size:"small",onClick:()=>{var s;return m((s=r==null?void 0:r.row)==null?void 0:s.id)},children:"Send Inquiry"})}):e(H,{variant:"outlined",size:"small",color:"success",children:"Inquiry Sent"})})}},{field:"assign_task",minWidth:window.innerWidth>600?200:100,headerName:"Assign Task",renderCell:r=>{var n,a;return e(k,{children:r.row.assigned_status==="Not Assigned"?e(k,{children:c[(n=r==null?void 0:r.row)==null?void 0:n.id]?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(H,{variant:"contained",size:"small",sx:{backgroundColor:"#8C7CF0 !important"},onClick:()=>{var s;w((s=r==null?void 0:r.row)==null?void 0:s.id)},children:"Assign"})}):e(k,{children:c[(a=r==null?void 0:r.row)==null?void 0:a.id]?o("span",{className:"flex items-center justify-start",children:[e(B,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(H,{variant:"outlined",size:"small",color:"error",onClick:()=>{var s;return z((s=r==null?void 0:r.row)==null?void 0:s.id)},children:"Unassign"})})})}}],me=r=>{if(R(r.target.value),A!==""){const n=C.filter(a=>a.name.toLowerCase().includes(r.target.value.toLowerCase()));$(n)}},fe=r=>{if(S(r),r!==""){if(r==="inquiry sent"){const n=C.filter(a=>{var s;return((s=a==null?void 0:a.inquiry_status)==null?void 0:s.toLowerCase())===(r==null?void 0:r.toLowerCase())});$(n)}else if(r==="inquiry not sent"){const n=C.filter(a=>{var s;return((s=a==null?void 0:a.inquiry_status)==null?void 0:s.toLowerCase())===(r==null?void 0:r.toLowerCase())});$(n)}else if(r==="assigned"){const n=C.filter(a=>a.assigned_status.toLowerCase()===(r==null?void 0:r.toLowerCase()));$(n)}else if(r==="not assigned"){const n=C.filter(a=>a.assigned_status.toLowerCase()===(r==null?void 0:r.toLowerCase()));$(n)}}else $(C)};return o(k,{children:[o("div",{className:"flex md:flex-row flex-col-reverse items-start gap-2 md:items-center md:justify-between md:w-full mb-2 w-[20rem]",children:[e(g,{children:e(ke,{variant:"outlined",fullWidth:!0,children:e(Pr,{type:"text",value:A,onChange:me,placeholder:"Search name here...",startAdornment:e($e,{position:"start",children:e(Se,{})})})})}),o(g,{display:"flex",alignItems:"center",children:[e(y,{variant:"subtitle2",sx:{pr:1},children:"Filter by:"}),e(H,{size:"small",variant:"outlined",ref:x,onClick:()=>i(!0),endIcon:e(bt,{fontSize:"small"}),children:P===""?"All":P}),e(tt,{disableScrollLock:!0,anchorEl:x.current,onClose:()=>i(!1),open:_,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:Wr.map(r=>e(ce,{onClick:()=>{fe(r.value),i(!1)},children:r.text},r.value))})]})]}),e(g,{sx:{width:"100%"},children:e(Ne,{autoHeight:!0,rowHeight:100,rows:A!==""||P!==""?T:C,columns:ue,initialState:{pagination:{paginationModel:{pageSize:25}}},disableRowSelectionOnClick:!0})}),o(de,{open:l,maxWidth:!0,children:[o(ae,{className:"flex items-center justify-between cursor-pointer",children:[o("span",{className:"flex  gap-2",children:[e(St,{className:"rounded-xl bg-blue141",onClick:()=>L(1)}),v!==2&&e(Mt,{className:"rounded-xl bg-blue141",onClick:()=>L(2)})]}),e(wt,{size:"30",onClick:()=>te()})," "]}),e("div",{className:"flex flex-col  items-center justify-center   p-5  w-full gap-[20px] p-2 ",children:o(oe,{className:"w-[100%] flex flex-col gap-2",children:[v===1&&o(k,{children:[" ",e("div",{className:"mt-2",style:{background:"#fff"},children:e(zt.Editor,{editorStyle:Rr,editorState:q,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:E,toolbarStyle:{color:"black",width:"90%",background:"#fff"}})}),e("div",{className:"flex gap-5 mt-5",children:e(H,{className:"bg-blue141 text-white",onClick:()=>{he()},children:"Next"})})]}),v===2&&o(k,{children:[" ",o("div",{className:"mt-2 w-[100%] md:w-[50rem] h-[100%] rounded-xl",style:{background:"#fff"},children:[e("div",{className:"text-center p-5",children:e("h2",{className:"font-Bold text-[2rem] underline text-black999",children:"Preview of Your Mail"})}),o("div",{className:"text-black999 text-[1.2rem] mt-0 md:mt-2 p-8 md:p-10 m-auto md:m-10",children:[o("div",{children:["Hi, ",d]}),o("div",{children:["Assignment ID # ",G," has been assigned to you. You can find the details of it in your pm panel. Please look into it immediately"]}),e("div",{className:"text-black999",dangerouslySetInnerHTML:{__html:h}})]})]}),o("div",{className:"flex mt-5 gap-10",children:[e(H,{onClick:()=>{L(1)},children:"Previous"}),e(H,{className:"bg-blue141 text-white",onClick:()=>{Q()},children:"Send Mail"})]})]})]})})]})]})}function fo(){const t=Te(),{id:c}=Tt();f.useEffect(()=>{localStorage.setItem("currentId",c)},[c]);const m=ie(ne),z=["Technical hr","Non-Technical hr"],w=[{value:"details",label:"Details Overview"},{value:"projectManagers",label:"All Project Managers"},{value:"freelancers",label:"All Freelancers"}],T=[{value:"details",label:"Details Overview"}],[$,A]=f.useState("details"),[R,P]=f.useState({}),[S,x]=f.useState({}),[_,i]=f.useState([]),[C,q]=f.useState([]),[U,E]=f.useState({}),[h,l]=f.useState([]),[u,v]=f.useState(""),[L,G]=f.useState({}),[j,d]=f.useState({id:!1}),[N,te]=f.useState(w),he=(n,a)=>{A(a)},Q=async()=>{z.includes(m==null?void 0:m.teamDomain)&&te(T),await M.get(`${I}/team/freelancingassignmentdetails.php?id=${c}&role=admin`).then(async n=>{var s,W,p,re,Be;P(n==null?void 0:n.data[0]),G(n==null?void 0:n.data[1]),((W=(s=n==null?void 0:n.data[0])==null?void 0:s.stream)==null?void 0:W.toLowerCase())==="commerce"||((re=(p=n==null?void 0:n.data[0])==null?void 0:p.stream)==null?void 0:re.toLowerCase())==="arts"?v("Non-Technical"):v("Technical"),E(n==null?void 0:n.data[2].find(X=>(X==null?void 0:X.status)==="Assigned"));const a=[];(Be=n==null?void 0:n.data[3])==null||Be.forEach(X=>{(X==null?void 0:X.assigned_status)==="Assigned"&&a.push(X)}),l(a),x(n==null?void 0:n.data[1]),i(n==null?void 0:n.data[2]),q(n==null?void 0:n.data[3])}).catch(n=>{console.log(n)})},ue=async n=>{var a,s,W;d({...j,[n]:!0});try{const p=await M.get(`${I}/team/assigntopm.php?pm_id=${n}&assignment_id=${c}`);((a=p==null?void 0:p.data)==null?void 0:a.status)===200?b.success((s=p==null?void 0:p.data)==null?void 0:s.message):b.error((W=p==null?void 0:p.data)==null?void 0:W.message)}catch(p){console.log(p),b.error("An error occured")}d({...j,[n]:!1}),Q()},me=async n=>{var a,s,W;d({...j,[n]:!0});try{const p=await M.get(`${I}/team/assigntofreelancer.php?freelancer_id=${n}&assignment_id=${c}`);((a=p==null?void 0:p.data)==null?void 0:a.status)===200?b.success((s=p==null?void 0:p.data)==null?void 0:s.message):b.error((W=p==null?void 0:p.data)==null?void 0:W.message)}catch(p){console.log(p),b.error("An error occured")}d({...j,[n]:!1}),Q()},fe=async n=>{var a;d({...j,[n]:!0});try{const s=await M.get(`${I}/team/unassigntofreelancer.php?freelancer_id=${n}&assignment_id=${c}`);b.success((a=s==null?void 0:s.data)==null?void 0:a.status)}catch(s){console.log(s),b.error("An error occured")}d({...j,[n]:!1}),Q()},r=async n=>{var a;d({...j,[n]:!0});try{const s=await M.get(`${I}/team/sendinquirytoassign.php?freelancer_id=${n}&assignment_id=${c}`);b.success((a=s==null?void 0:s.data)==null?void 0:a.status)}catch(s){console.log(s),b.error("An error occured")}d({...j,[n]:!1}),Q()};return f.useEffect(()=>{Q()},[c]),o(k,{children:[e(_t,{children:e("title",{children:"Tasks Dashboard"})}),e(yt,{children:e(Kt,{assignmentDetails:R,id:c})}),o(g,{fullwidth:"true",sx:{mx:2},children:[e(gt,{children:e(Bt,{onChange:he,value:$,variant:"scrollable",scrollButtons:"auto",textColor:"primary",indicatorColor:"primary",children:N.map(n=>e(Yt,{label:n.label,value:n.value},n.value))})}),e(Ce,{variant:"outlined",children:o(V,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0,children:[$==="details"&&o(k,{children:[e(V,{item:!0,xs:12,children:e(g,{sx:{background:`${t.colors.alpha.black[5]}`},children:e(V,{container:!0,spacing:0,children:e(V,{item:!0,xs:12,md:12,children:e(g,{sx:{background:`${t.colors.alpha.white[70]}`,"@media screen and (max-width: 600px)":{p:0},"@media screen and (min-width: 1200px)":{p:3}},children:e(Mr,{assignmentDetails:R,assignedPM:U,assignedFreelancer:h,id:c})})})})})}),o(V,{item:!0,xs:12,children:[e(Z,{}),e(g,{p:2,sx:{background:`${t.colors.alpha.black[5]}`},children:o(V,{container:!0,spacing:4,children:[e(V,{item:!0,xs:12,sm:6,md:6,children:e(g,{sx:{"@media screen and (max-width: 600px)":{p:0},"@media screen and (min-width: 1200px)":{p:2}},children:e(Zt,{assignmentDetails:R,fetchAssignmentDetails:Q,id:c})})}),e(V,{item:!0,xs:12,sm:6,md:6,children:e(g,{sx:{"@media screen and (max-width: 600px)":{p:0},"@media screen and (min-width: 1200px)":{p:5}},children:e(tr,{lostReason:L,id:c,userDetails:S})})})]})}),e(Z,{})]}),e(V,{item:!0,xs:12,children:e(Z,{})})]}),$==="projectManagers"&&e(V,{item:!0,xs:12,children:e(g,{sx:{"@media screen and (max-width: 600px)":{p:1},"@media screen and (min-width: 1200px)":{p:3}},children:e(Ir,{assignmentDetailsStream:u,projectManagers:_,handleAssignPM:ue,isLoading:j})})}),$==="freelancers"&&e(V,{item:!0,xs:12,children:e(g,{sx:{"@media screen and (max-width: 600px)":{p:1},"@media screen and (min-width: 1200px)":{p:3}},children:e(Vr,{freelancers:C,isLoading:j,handleAssign:me,handleUnassign:fe,handleInquiry:r})})})]})})]})]})}export{fo as default};
